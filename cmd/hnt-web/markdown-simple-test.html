<!DOCTYPE html>
<html>
<head>
    <title>Simple Parser Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 1200px; margin: 0 auto; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .pass { background: #d0ffd0; }
        .fail { background: #ffd0d0; }
        code { background: #f0f0f0; padding: 2px 4px; }
    </style>
</head>
<body>
    <h1>Simple Markdown Parser Test</h1>
    
    <div id="results"></div>

    <script>
        function escapeHtml(str) {
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }
    </script>
    <script src="markdown-parser-simple.js"></script>
    <script>
        const tests = [
            // Basic
            { input: "**bold text**", expected: "<strong>bold text</strong>" },
            { input: "__bold text__", expected: "<strong>bold text</strong>" },
            { input: "*italic text*", expected: "<em>italic text</em>" },
            { input: "_italic text_", expected: "<em>italic text</em>" },
            
            // Complex
            { input: "**bold *italic* text**", expected: "<strong>bold <em>italic</em> text</strong>" },
            { input: "*italic **bold** text*", expected: "<em>italic <strong>bold</strong> text</em>" },
            { input: "**bold _italic_ text**", expected: "<strong>bold <em>italic</em> text</strong>" },
            { input: "_italic __bold__ text_", expected: "<em>italic <strong>bold</strong> text</em>" },
            { input: "***bold and italic***", expected: "<strong><em>bold and italic</em></strong>" },
            { input: "**bold with * asterisk**", expected: "<strong>bold with * asterisk</strong>" },
            
            // Edge cases
            { input: "**bold** and **more bold**", expected: "<strong>bold</strong> and <strong>more bold</strong>" },
            { input: "un*believ*able", expected: "un<em>believ</em>able" },
            { input: "**unclosed bold", expected: "<strong>unclosed bold</strong>" },
            { input: "*unclosed italic", expected: "<em>unclosed italic</em>" },
            
            // With code
            { input: "Text with `code` and **bold**", expected: "Text with <code>code</code> and <strong>bold</strong>" },
            { input: "**bold with `code` inside**", expected: "<strong>bold with <code>code</code> inside</strong>" },
        ];
        
        const results = document.getElementById('results');
        let passed = 0;
        
        tests.forEach((test, i) => {
            const result = renderMarkdownSimple(test.input);
            const isPass = result === test.expected;
            if (isPass) passed++;
            
            const div = document.createElement('div');
            div.className = 'test ' + (isPass ? 'pass' : 'fail');
            div.innerHTML = `
                <strong>Test ${i + 1}:</strong> <code>${escapeHtml(test.input)}</code><br>
                Expected: <code>${escapeHtml(test.expected)}</code><br>
                Got: <code>${escapeHtml(result)}</code><br>
                Rendered: ${result}<br>
                Status: ${isPass ? '✓ PASS' : '✗ FAIL'}
            `;
            results.appendChild(div);
        });
        
        const summary = document.createElement('h2');
        summary.textContent = `Results: ${passed}/${tests.length} passed (${Math.round(passed/tests.length*100)}%)`;
        document.body.insertBefore(summary, results);
    </script>
</body>
</html>